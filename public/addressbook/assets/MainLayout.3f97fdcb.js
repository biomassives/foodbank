import{k,i as de,l as Q,p as fe,j as u,q as h,s as F,u as K,v as Te,x as W,r as y,y as xe,a as M,w as x,z as _e,A as Pe,B as I,C as ee,D as te,T as Ce,E as qe,F as ze,G as ve,H as He,I as H,J as $,K as P,L as w,M as oe,Q as $e,N as ae,O as A,P as ne,_ as Qe,R as le}from"./index.2b4c1443.js";import{Q as ke,A as Le}from"./Modal.89537daa.js";import{g as j,Q as U,u as Oe,a as D,s as Re,b as Ee,c as Ve,d as Be,e as Me,f as Ae,h as Fe,i as re,j as We,k as Ne}from"./use-quasar.6ff0ae8d.js";import{Q as je}from"./QCard.cab38a8e.js";import{u as De,v as ie,a as Ie,b as Ue,c as Ke,r as se,s as Ge,p as ue,d as Je}from"./position-engine.4f64346e.js";import{u as Xe,s as ce}from"./store.768f854b.js";import"./QCardSection.277d7bd0.js";var Ye=k({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:c}}=W(),o=de(K,Q);if(o===Q)return console.error("QPageContainer needs to be child of QLayout"),Q;fe(Te,!0);const a=u(()=>{const r={};return o.header.space===!0&&(r.paddingTop=`${o.header.size}px`),o.right.space===!0&&(r[`padding${c.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(r.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(r[`padding${c.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),r});return()=>h("div",{class:"q-page-container",style:a.value},F(v.default))}}),Ze=k({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:c}){const{proxy:{$q:o}}=W(),a=y(null),r=y(o.screen.height),f=y(e.container===!0?0:o.screen.width),d=y({position:0,direction:"down",inflectionPoint:0}),i=y(0),s=y(xe.value===!0?0:j()),L=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),O=u(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),R=u(()=>s.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),g=u(()=>s.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function S(n){if(e.container===!0||document.qScrollPrevented!==!0){const l={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};d.value=l,e.onScroll!==void 0&&c("scroll",l)}}function _(n){const{height:l,width:T}=n;let b=!1;r.value!==l&&(b=!0,r.value=l,e.onScrollHeight!==void 0&&c("scrollHeight",l),C()),f.value!==T&&(b=!0,f.value=T),b===!0&&e.onResize!==void 0&&c("resize",n)}function E({height:n}){i.value!==n&&(i.value=n,C())}function C(){if(e.container===!0){const n=r.value>i.value?j():0;s.value!==n&&(s.value=n)}}let t=null;const p={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:a,height:r,containerHeight:i,scrollbarWidth:s,totalWidth:u(()=>f.value+s.value),rows:u(()=>{const n=e.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:M({size:0,offset:0,space:!1}),right:M({size:300,offset:0,space:!1}),footer:M({size:0,offset:0,space:!1}),left:M({size:300,offset:0,space:!1}),scroll:d,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(n,l,T){p[n][l]=T}};if(fe(K,p),j()>0){let T=function(){n=null,l.classList.remove("hide-scrollbar")},b=function(){if(n===null){if(l.scrollHeight>o.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(T,300)},V=function(z){n!==null&&z==="remove"&&(clearTimeout(n),T()),window[`${z}EventListener`]("resize",b)},n=null;const l=document.body;x(()=>e.container!==!0?"add":"remove",V),e.container!==!0&&V("add"),_e(()=>{V("remove")})}return()=>{const n=Pe(v.default,[h(ke,{onScroll:S}),h(U,{onResize:_})]),l=h("div",{class:L.value,style:O.value,ref:e.container===!0?void 0:a,tabindex:-1},n);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:a},[h(U,{onResize:E}),h("div",{class:"absolute-full",style:R.value},[h("div",{class:"scroll",style:g.value},[l])])]):l}}}),et=k({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:v}){const c=u(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>h("div",{class:c.value},F(v.default))}}),tt=k({name:"QTooltip",inheritAttrs:!1,props:{...De,...Oe,...D,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...D.transitionShow,default:"jump-down"},transitionHide:{...D.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ie},self:{type:String,default:"top middle",validator:ie},offset:{type:Array,default:()=>[14,14],validator:Ie},scrollTarget:Re,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ee],setup(e,{slots:v,emit:c,attrs:o}){let a,r;const f=W(),{proxy:{$q:d}}=f,i=y(null),s=y(!1),L=u(()=>ue(e.anchor,d.lang.rtl)),O=u(()=>ue(e.self,d.lang.rtl)),R=u(()=>e.persistent!==!0),{registerTick:g,removeTick:S}=Ve(),{registerTimeout:_}=Be(),{transitionProps:E,transitionStyle:C}=Me(e),{localScrollTarget:t,changeScrollEvent:p,unconfigureScrollTarget:n}=Ue(e,Y),{anchorEl:l,canShow:T,anchorEvents:b}=Ke({showing:s,configureAnchorEl:be}),{show:V,hide:z}=Ae({showing:s,canShow:T,handleShow:me,handleHide:ge,hideOnRouteChange:R,processOnMount:!0});Object.assign(b,{delayShow:pe,delayHide:ye});const{showPortal:G,hidePortal:J,renderPortal:he}=Fe(f,i,Se,"tooltip");if(d.platform.is.mobile===!0){const m={anchorEl:l,innerRef:i,onClickOutside(q){return z(q),q.target.classList.contains("q-dialog__backdrop")&&qe(q),!0}},N=u(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);x(N,q=>{(q===!0?Je:se)(m)}),I(()=>{se(m)})}function me(m){G(),g(()=>{r=new MutationObserver(()=>B()),r.observe(i.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),B(),Y()}),a===void 0&&(a=x(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,B)),_(()=>{G(!0),c("show",m)},e.transitionDuration)}function ge(m){S(),J(),X(),_(()=>{J(!0),c("hide",m)},e.transitionDuration)}function X(){r!==void 0&&(r.disconnect(),r=void 0),a!==void 0&&(a(),a=void 0),n(),ee(b,"tooltipTemp")}function B(){Ge({targetEl:i.value,offset:e.offset,anchorEl:l.value,anchorOrigin:L.value,selfOrigin:O.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function pe(m){if(d.platform.is.mobile===!0){re(),document.body.classList.add("non-selectable");const N=l.value,q=["touchmove","touchcancel","touchend","click"].map(Z=>[N,Z,"delayHide","passiveCapture"]);te(b,"tooltipTemp",q)}_(()=>{V(m)},e.delay)}function ye(m){d.platform.is.mobile===!0&&(ee(b,"tooltipTemp"),re(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),_(()=>{z(m)},e.hideDelay)}function be(){if(e.noParentEvent===!0||l.value===null)return;const m=d.platform.is.mobile===!0?[[l.value,"touchstart","delayShow","passive"]]:[[l.value,"mouseenter","delayShow","passive"],[l.value,"mouseleave","delayHide","passive"]];te(b,"anchor",m)}function Y(){if(l.value!==null||e.scrollTarget!==void 0){t.value=We(l.value,e.scrollTarget);const m=e.noParentEvent===!0?B:z;p(t.value,m)}}function we(){return s.value===!0?h("div",{...o,ref:i,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,C.value],role:"tooltip"},F(v.default)):null}function Se(){return h(Ce,E.value,we)}return I(X),Object.assign(f.proxy,{updatePosition:B}),he}}),ot=k({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:v}){const c=u(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>h("div",{class:c.value,role:"toolbar"},F(v.default))}}),at=k({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:v,emit:c}){const{proxy:{$q:o}}=W(),a=de(K,Q);if(a===Q)return console.error("QHeader needs to be child of QLayout"),Q;const r=y(parseInt(e.heightHint,10)),f=y(!0),d=u(()=>e.reveal===!0||a.view.value.indexOf("H")!==-1||o.platform.is.ios&&a.isContainer.value===!0),i=u(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return f.value===!0?r.value:0;const t=r.value-a.scroll.value.position;return t>0?t:0}),s=u(()=>e.modelValue!==!0||d.value===!0&&f.value!==!0),L=u(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),O=u(()=>"q-header q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),R=u(()=>{const t=a.rows.value.top,p={};return t[0]==="l"&&a.left.space===!0&&(p[o.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),t[2]==="r"&&a.right.space===!0&&(p[o.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),p});function g(t,p){a.update("header",t,p)}function S(t,p){t.value!==p&&(t.value=p)}function _({height:t}){S(r,t),g("size",t)}function E(t){L.value===!0&&S(f,!0),c("focusin",t)}x(()=>e.modelValue,t=>{g("space",t),S(f,!0),a.animate()}),x(i,t=>{g("offset",t)}),x(()=>e.reveal,t=>{t===!1&&S(f,e.modelValue)}),x(f,t=>{a.animate(),c("reveal",t)}),x(a.scroll,t=>{e.reveal===!0&&S(f,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const C={};return a.instances.header=C,e.modelValue===!0&&g("size",r.value),g("space",e.modelValue),g("offset",i.value),I(()=>{a.instances.header===C&&(a.instances.header=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const t=ze(v.default,[]);return e.elevated===!0&&t.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(h(U,{debounce:0,onResize:_})),h("header",{class:O.value,style:R.value,onFocusin:E},t)}}});const nt=ve({__name:"MainHeader",setup(e){const v=y(""),c=y(!1),o=Xe(),a=He(),r=u(()=>!!ce.auth.getSession());x(v,d=>{o.search(d)});async function f(){await ce.auth.signOut(),o.$patch({role:"viewer"}),a.push("/login")}return(d,i)=>(H(),$(at,{elevated:"",class:"glossy border-top-sm",style:{padding:"10px",color:"white"}},{default:P(()=>[w(ot,null,{default:P(()=>[w(et,null,{default:P(()=>[...i[3]||(i[3]=[oe(" Ward Food Pantry ",-1)])]),_:1}),w(je,{color:"white","input-style":"color: white","label-color":"white",label:"search",modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=s=>v.value=s),modelModifiers:{lazy:!0,trim:!0},class:"q-mr-md"},{prepend:P(()=>[w($e,{color:"white",name:"search"})]),_:1},8,["modelValue"]),ae(o).canEdit?(H(),$(A,{key:0,flat:"",round:"",icon:"admin_panel_settings",to:"/admin",class:"q-mr-sm"},{default:P(()=>[w(tt,null,{default:P(()=>[...i[4]||(i[4]=[oe("Manager Dashboard",-1)])]),_:1})]),_:1})):ne("",!0),ae(o).canEdit?(H(),$(A,{key:1,flat:"",dense:"",round:"",icon:"group_add",onClick:i[1]||(i[1]=s=>c.value=!0)})):ne("",!0),w(Ne,{dark:"",vertical:"",inset:"",class:"q-mx-sm"}),r.value?(H(),$(A,{key:3,flat:"",round:"",icon:"logout",onClick:f})):(H(),$(A,{key:2,flat:"",round:"",icon:"login",to:"/login"})),w(Le,{"card-state":c.value,"onUpdate:cardState":i[2]||(i[2]=s=>c.value=s)},null,8,["card-state"])]),_:1})]),_:1}))}}),lt=ve({name:"MainLayout",components:{HeaderComponent:nt}});function rt(e,v,c,o,a,r){const f=le("header-component"),d=le("router-view");return H(),$(Ze,{view:"lHh Lpr lFf"},{default:P(()=>[w(f),w(Ye,{class:"book-container"},{default:P(()=>[w(d)]),_:1})]),_:1})}var ht=Qe(lt,[["render",rt]]);export{ht as default};
