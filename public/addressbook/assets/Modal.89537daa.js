import{k as $,w as S,S as k,B as E,U as K,x as U,V as z,W as B,X as D,j as L,q as R,s as T,Y as M,Z as j,G as O,r as f,$ as Z,_ as F,I as x,J as G,K as y,L as i,a0 as V,a1 as H,a2 as b,a3 as J,O as q}from"./index.2b4c1443.js";import{s as W,j as X,l as Y,m as _,n as ee,o as ae,p as te,k as se,q as le}from"./use-quasar.6ff0ae8d.js";import{Q as w}from"./QCardSection.277d7bd0.js";import{Q as I,a as ne}from"./QCard.cab38a8e.js";import{u as oe,i as re}from"./store.768f854b.js";const{passive:A}=z,de=["both","horizontal","vertical"];var Se=$({name:"QScrollObserver",props:{axis:{type:String,validator:e=>de.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:W},emits:["scroll"],setup(e,{emit:a}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let s=null,o,p;S(()=>e.scrollTarget,()=>{m(),l()});function r(){s==null||s();const v=Math.max(0,Y(o)),g=_(o),d={top:v-t.position.top,left:g-t.position.left};if(e.axis==="vertical"&&d.top===0||e.axis==="horizontal"&&d.left===0)return;const h=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";t.position={top:v,left:g},t.directionChanged=t.direction!==h,t.delta=d,t.directionChanged===!0&&(t.direction=h,t.inflectionPoint=t.position),a("scroll",{...t})}function l(){o=X(p,e.scrollTarget),o.addEventListener("scroll",u,A),u(!0)}function m(){o!==void 0&&(o.removeEventListener("scroll",u,A),o=void 0)}function u(v){if(v===!0||e.debounce===0||e.debounce==="0")r();else if(s===null){const[g,d]=e.debounce?[setTimeout(r,e.debounce),clearTimeout]:[requestAnimationFrame(r),cancelAnimationFrame];s=()=>{d(g),s=null}}}const{proxy:c}=U();return S(()=>c.$q.lang.rtl,r),k(()=>{p=c.$el.parentNode,l()}),E(()=>{s==null||s(),m()}),Object.assign(c,{trigger:u,getPosition:()=>t}),K}}),ie=$({name:"QCardActions",props:{...B,vertical:Boolean},setup(e,{slots:a}){const t=D(e),s=L(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>R("div",{class:s.value},T(a.default))}});function P(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}var ue=M({name:"close-popup",beforeMount(e,{value:a}){const t={depth:P(a),handler(s){t.depth!==0&&setTimeout(()=>{const o=ee(e);o!==void 0&&ae(o,s,t.depth)})},handlerKey(s){j(s,13)===!0&&t.handler(s)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:a,oldValue:t}){a!==t&&(e.__qclosepopup.depth=P(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});const ce=O({name:"AddressModal",props:{cardState:{required:!0,type:Boolean},addressInfo:{required:!1,type:Object}},emits:["update:cardState"],setup(e,{emit:a}){var h;const t=oe(),s=f(!1),o=Z(e,"cardState"),p=f((h=e.addressInfo)==null?void 0:h.id),r=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,l=f(e.addressInfo?e.addressInfo.name.first:""),m=f(e.addressInfo?e.addressInfo.name.last:""),u=f(e.addressInfo?e.addressInfo.email:""),c=f(e.addressInfo?e.addressInfo.phone:""),v=te(),g=()=>{v.notify({type:"negative",position:"top",message:"Please check all details for validation purposes."})},d=async()=>{if(!re({firstName:l.value,lastName:m.value,email:u.value,phone:c.value}))return g();const n=l.value[0].toUpperCase().concat(l.value.slice(1)),Q=m.value[0].toUpperCase().concat(m.value.slice(1)),C={id:"",name:{first:n,last:Q},email:u.value,phone:c.value};if(p.value){const N=p.value;C.id=N,await t.updateData({addressId:N,address:C})}else await t.addData(C);a("update:cardState",!1)};return S(o,n=>{s.value=n}),S(s,n=>{l.value=e.addressInfo?e.addressInfo.name.first:"",m.value=e.addressInfo?e.addressInfo.name.last:"",u.value=e.addressInfo?e.addressInfo.email:"",c.value=e.addressInfo?e.addressInfo.phone:"",a("update:cardState",n)}),{internalCard:s,firstName:l,lastName:m,email:u,phone:c,prompt:f(!1),emailPattern:r,nameRules:[n=>n&&n.length>0||"Please type Name",n=>n&&n.length>=3||"Please enter 3 or more",n=>n&&/^[a-z]+$/gi.test(n)||"String only"],emailRules:[n=>n&&r.test(n)||"Invalid email format"],phoneRules:[()=>c.value.replace(/[-()\s]/g,"").length>=10||"Invalid phone number format"],saveAddress:d}}}),me={class:"text-h6"},fe={class:"row"},pe={class:"row"};function ve(e,a,t,s,o,p){return x(),G(le,{modelValue:e.internalCard,"onUpdate:modelValue":a[8]||(a[8]=r=>e.internalCard=r)},{default:y(()=>[i(ne,{class:"my-card"},{default:y(()=>[i(w,{class:"flex justify-content-center bg-grey-8 text-white align-center"},{default:y(()=>[V("div",me,H(e.addressInfo?"Address Edit":"New Address"),1)]),_:1}),i(se),i(w,{class:"q-pt-none"},{default:y(()=>{var r;return[V("div",fe,[i(I,{class:"q-ma-sm",style:{width:"200px"},dense:"",modelValue:e.firstName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.firstName=l),readonly:!!((r=e.addressInfo)!=null&&r.id),label:"First Name",rules:e.nameRules,autofocus:"",clearable:"",onKeyup:a[1]||(a[1]=b(l=>e.prompt=!1,["enter"]))},null,8,["modelValue","readonly","rules"]),i(I,{class:"q-ma-sm",style:{width:"200px"},dense:"",modelValue:e.lastName,"onUpdate:modelValue":a[2]||(a[2]=l=>e.lastName=l),label:"Last Name",rules:e.nameRules,clearable:"",onKeyup:a[3]||(a[3]=b(l=>e.prompt=!1,["enter"]))},null,8,["modelValue","rules"])]),V("div",pe,[i(I,{class:"q-ma-sm",style:{width:"200px"},dense:"",modelValue:e.email,"onUpdate:modelValue":a[4]||(a[4]=l=>e.email=l),label:"E-mail",rules:e.emailRules,clearable:"",onKeyup:a[5]||(a[5]=b(l=>e.prompt=!1,["enter"]))},null,8,["modelValue","rules"]),i(I,{class:"q-ma-sm",style:{width:"200px"},dense:"",modelValue:e.phone,"onUpdate:modelValue":a[6]||(a[6]=l=>e.phone=l),label:"Phone Number",mask:"(###) ### - ####",rules:e.phoneRules,clearable:"",onKeyup:a[7]||(a[7]=b(l=>e.prompt=!1,["enter"]))},null,8,["modelValue","rules"])])]}),_:1}),i(ie,{class:"text-grey-8 justify-end"},{default:y(()=>[J(i(q,{flat:"",label:"Cancel"},null,512),[[ue]]),i(q,{flat:"",label:"Save address",onClick:e.saveAddress},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ce=F(ce,[["render",ve]]);export{Ce as A,ue as C,Se as Q,ie as a};
