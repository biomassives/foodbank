import{_ as L,y as w,z as B,r as y,a as d,A as i,B as P,C as a,D as o,E as t,Q as _,F as g,G as u,N as f,O as N,W as c,aB as C,f as M}from"./index.86fc262c.js";import{Q as n}from"./QCardSection.128d10df.js";import{f as r,Q as A,C as O}from"./ClosePopup.0a1e2cc5.js";import{Q as q}from"./QToggle.5286364e.js";import{Q as F}from"./QCardActions.83788304.js";import{Q as E}from"./QPage.3923ee58.js";import{b as G}from"./use-quasar.00d2e197.js";const T={class:"settings-wrap"},U={class:"row items-center q-gutter-sm q-mt-xs"},W={class:"text-body1 text-weight-medium"},$={key:0,class:"text-caption text-grey-6 q-mt-xs"},z={class:"text-caption text-grey-6 q-mb-sm"},R={key:0,class:"q-mt-xs"},h={key:1,class:"q-mt-xs"},Y={class:"row items-center q-gutter-sm"},j={key:2,class:"q-mt-xs"},H=w({__name:"SettingsPage",setup(J){const s=B(),v=G(),x=y(!1),b=y(!1),m=y(!1),S=d(()=>s.getData.length),Q=d(()=>s.getEntries.length),V=d(()=>s.canSync?"cloud_done":s.localMode?"smartphone":s.isLoggedIn?"person":"visibility"),k=d(()=>s.canSync?"green-7":s.localMode?"blue-7":s.isLoggedIn?"orange-7":"grey-5"),D=d(()=>s.canSync?"Synced to cloud":s.localMode?"Local mode":s.isLoggedIn?"Signed in \u2014 no pantry":"Visitor");async function I(){const p=indexedDB.deleteDatabase("myAddressDB");p.onsuccess=()=>{localStorage.removeItem("localMode"),localStorage.removeItem("pantryName"),s.$patch({addressList:[],entryList:[]}),v.notify({color:"positive",message:"Local data cleared."}),m.value=!1},p.onerror=()=>{v.notify({color:"negative",message:"Failed to clear data."})}}return(p,e)=>(i(),P(E,{class:"settings-page q-pa-md"},{default:a(()=>[o("div",T,[e[11]||(e[11]=o("div",{class:"text-h5 text-weight-bold q-mb-md",style:{"font-family":"'Nunito', sans-serif",color:"#111"}}," Settings ",-1)),t(r,{flat:"",bordered:"",class:"q-mb-md"},{default:a(()=>[t(n,null,{default:a(()=>[e[4]||(e[4]=o("div",{class:"text-overline text-grey-7"},"Your Status",-1)),o("div",U,[t(_,{name:V.value,color:k.value,size:"22px"},null,8,["name","color"]),o("span",W,g(D.value),1)]),u(s).userOrgId?(i(),f("div",$," Org: "+g(u(s).userOrgId),1)):N("",!0)]),_:1})]),_:1}),t(r,{flat:"",bordered:"",class:"q-mb-md"},{default:a(()=>[t(n,null,{default:a(()=>[e[5]||(e[5]=o("div",{class:"text-overline text-grey-7"},"Display",-1)),t(q,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),label:"Dark mode (coming soon)",disable:"",class:"q-mt-xs"},null,8,["modelValue"]),t(q,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),label:"Compact contact list",class:"q-mt-xs"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{flat:"",bordered:"",class:"q-mb-md"},{default:a(()=>[t(n,null,{default:a(()=>[e[6]||(e[6]=o("div",{class:"text-overline text-grey-7"},"Data",-1)),o("div",z,g(Q.value)+" entries and "+g(S.value)+" contacts stored locally. ",1),t(c,{outline:"","no-caps":"",dense:"",color:"red-7",label:"Clear Local Data",icon:"delete_sweep",onClick:e[2]||(e[2]=l=>m.value=!0),class:"q-mt-xs"})]),_:1})]),_:1}),t(r,{flat:"",bordered:"",class:"q-mb-md"},{default:a(()=>[t(n,null,{default:a(()=>[e[9]||(e[9]=o("div",{class:"text-overline text-grey-7"},"Connection",-1)),u(s).localMode&&!u(s).canSync?(i(),f("div",R,[e[7]||(e[7]=o("div",{class:"text-caption text-grey-6 q-mb-sm"}," Running in local mode. Connect to a pantry to enable cloud sync. ",-1)),t(c,{outline:"","no-caps":"",dense:"",color:"blue-8",label:"Connect to a Pantry",icon:"cloud_upload",to:"/login"})])):u(s).canSync?(i(),f("div",h,[o("div",Y,[t(_,{name:"cloud_done",color:"green-7"}),e[8]||(e[8]=o("span",{class:"text-body2"},"Synced to cloud",-1))])])):(i(),f("div",j,[t(c,{outline:"","no-caps":"",dense:"",color:"orange-8",label:"Get Started",icon:"login",to:"/login"})]))]),_:1})]),_:1}),t(r,{flat:"",bordered:""},{default:a(()=>[t(n,null,{default:a(()=>[...e[10]||(e[10]=[o("div",{class:"text-overline text-grey-7"},"About",-1),o("div",{class:"text-body2 q-mt-xs"},[o("strong",null,"Worldbridger Pantry"),C(" \u2014 GPL community resource sharing platform. ")],-1),o("div",{class:"text-caption text-grey-6 q-mt-xs"}," First deployment: Ward Food Pantry, Boulder County, CO. ",-1),o("div",{class:"text-caption text-grey-6 q-mt-xs"},[C(" Issues & contributions: "),o("a",{href:"https://github.com/biomassives/foodbank/issues",target:"_blank",class:"text-blue-7"}," github.com/biomassives/foodbank ")],-1)])]),_:1})]),_:1})]),t(A,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=l=>m.value=l)},{default:a(()=>[t(r,null,{default:a(()=>[t(n,null,{default:a(()=>[...e[12]||(e[12]=[o("div",{class:"text-h6"},"Clear all local data?",-1),o("p",{class:"text-body2 q-mt-sm"},"This removes all contacts and entries from your browser. Cloud data (if any) is not affected.",-1)])]),_:1}),t(F,{align:"right"},{default:a(()=>[M(t(c,{flat:"",label:"Cancel"},null,512),[[O]]),t(c,{flat:"",color:"red",label:"Clear",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var ae=L(H,[["__scopeId","data-v-5fbce2dd"]]);export{ae as default};
